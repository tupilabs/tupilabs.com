<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta name="description" content="Innovation and Open Source">
    <meta name="author" content="">
    <title>TupiLabs</title>
    <meta name="description" content="">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <meta name="mobile-web-app-capable" content="yes">
    
    <link rel="stylesheet" type="text/css" href="/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="/site.css">
</head>
<body>
    <!-- Following Menu -->
    <div class="ui large top fixed menu">
        <div class="ui container">
            <a class="item" href="/"><i class="home icon"></i> Home</a>
            <a class="item" href="/work"><i class="terminal icon"></i> Work</a>
            <a class="item" href="/tutorials"><i class="book icon"></i> Tutorials</a>
            <a class="item" href="/blog"><i class="newspaper icon"></i> Blog</a>
            <a class="item" href="/courses"><i class="student icon"></i> Courses</a>
            <a class="item" href="/lab"><i class="lab icon"></i> Lab</a>
            <div class="right menu">
                <a class="item" href="/contact"><i class="mail outline icon"></i> Contact</a>
            </div>
        </div>
    </div>
    
    <!-- Page Contents -->
    <div class="pusher">
        <div class="ui container">
            <div class="ui large stackable menu">
                <a class="item" href="/"><i class="home icon"></i> Home</a>
                <a class="item" href="/work"><i class="terminal icon"></i> Work</a>
                <a class="item" href="/tutorials"><i class="book icon"></i> Tutorials</a>
                <a class="item" href="/blog"><i class="newspaper icon"></i> Blog</a>
                <a class="item" href="/courses"><i class="student icon"></i> Courses</a>
                <a class="item" href="/lab"><i class="lab icon"></i> Lab</a>
                <div class="right menu">
                    <a class="item" href="/contact"><i class="mail outline icon"></i> Contact</a>
                </div>
            </div>
        </div>
        
        
        <div class="ui basic segment" id="blog">
    <div class="ui stackable grid container">
        <div class="row">
            <div class="sixteen wide column">
                <h1>Blog</h1>
            </div>
        </div>
        <div class="row">
            <div class="sixteen wide column">
                
                <section>
                    
                    <div class="ui padded segment">
  <article>
    <header>
      <h2><a href="/2014/08/11/on-using-laravel-with-the-repository-pattern-and-eloquent">On using Laravel with the repository pattern and Eloquent</a></h2>
      <small>Aug 11, 2014
        
        in 
            <a href="/tag/laravel">laravel</a>, <a href="/tag/php">php</a>
        
        
        | <a href="/blog">blog</a>
        
      </small>
    </header>
    <section>
      <p><a href="http://en.wikipedia.org/wiki/Separation_of_concerns">Separation of concerns</a> is a design principle, and 
states that each part of a software addresses a separate concern. Different patterns and abstractions 
can be used for that like MVC, DAOs and repositories.</p>
<p>Repositories help in the abstraction of the data layer. It provides an interface for retrieving data, 
independent of the implementation, acting like a collection of objects.</p>
<figure style='text-align: center'>
<img src="/2014/08/11/on-using-laravel-with-the-repository-pattern-and-eloquent/RepositoryDiagram.png" alt="From: http://blog.8thlight.com/mike-ebert/2013/03/23/the-repository-pattern.html"/>
<figcaption>Fig1. - Repositories <i>http://blog.8thlight.com/mike-ebert/2013/03/23/the-repository-pattern.html</i></figcaption>
</figure>

<p>In <a href="http://nestor-qa.org">Nestor-QA</a> I had implemented repositories using some Java code I had in my 
mind, without paying too much attention to the abstraction layers. Two weeks ago, while working on some 
complicated issue in Nestor I noticed that the repositories in Nestor had been implemented using the 
Eloquent classes.</p>
<p>Eloquent is a library used in Laravel for data abstraction. It provides access to databases like MySQL 
and SQLite, kind like DAOs (and sometimes like repositories too). However, for Nestor being a test 
management tool, we are trying to be platform and framework independent. Here&#8217;s the old repository code in 
action: </p>
<div class="highlight"><pre><span class="x">class DbProjectRepository implements ProjectRepository {</span>

<span class="x">    public function all()</span>
<span class="x">    {</span>
<span class="x">        return Project::where(&#39;project_statuses_id&#39;, &#39;&lt;&gt;&#39;, 2)-&gt;get();</span>
<span class="x">    }</span>

<span class="x">    // ...</span>

<span class="x">}</span>
</pre></div>

<p>As you can see, we were returning the result of the get() method from Eloquent. Another big mistake was 
using these objects in the views. In the end we were not only using data layer elements in the wrong place, 
but we also had many queries to render an UI. </p>
<div class="highlight"><pre><span class="x">abstract class DbBaseRepository extends BaseRepository {</span>

<span class="x">    protected $model;</span>

<span class="x">    public function __construct($model)</span>
<span class="x">    {</span>
<span class="x">        $this-&gt;model = $model;</span>
<span class="x">    }</span>

<span class="x">    public function all()</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;model-&gt;all()-&gt;toArray();</span>
<span class="x">    }</span>

<span class="x">    // ...</span>
<span class="x">}</span>
</pre></div>

<p>After searching for a while, I found a <a href="https://github.com/samgreenwood/swapshop/tree/master/app/Swapshop/Repositories">nice example</a> 
of a class design for repositories, where the return type is always an array. In the views you will 
have the array and keys, and in case someday you decide moving to another framework, you can leave the 
views unchanged (hopefully :-). Neat, no?</p>
<p><img alt="Ahn ahn" src="/2014/08/11/on-using-laravel-with-the-repository-pattern-and-eloquent/SA1HWow.gif" /></p>
<p>Happy hacking</p>
    </section>
  </article>
</div>
                    
                    <div class="ui padded segment">
  <article>
    <header>
      <h2><a href="/2014/06/15/continuation-passing-style">Continuation Passing Style</a></h2>
      <small>Jun 15, 2014
        
        in 
            <a href="/tag/jenkins">jenkins</a>, <a href="/tag/functional%20programming">functional programming</a>
        
        
        | <a href="/blog">blog</a>
        
      </small>
    </header>
    <section>
      <h3>Continuation Passing Style</h3>
<p>In <a href="http://en.wikipedia.org/wiki/Continuation-passing_style">Continuation Passing Style</a> (CPS), the program is comprised of several <strong>continuations</strong>. The methods in CPS programming do not return a value, rather, they pass control (including the current context) to the next continuation.</p>
<p>Each continuation receives a context, which stores the state of the current chain of continuations at a
given time, and can alter this context and call the next continuation. There can exist different types of 
continuations too, for handling exceptions, suspending the program, or simply calling other continuations. </p>
<p>In some functional programming languages CPS is supported and can be used in conjunction with <a href="http://en.wikipedia.org/wiki/Tail_call">tail-call optimization</a> to try to <a href="http://en.wikipedia.org/wiki/Continuation-passing_style#CPS_and_tail_calls">control the call stack size</a>.</p>
<h3>Use cases of CPS in Java</h3>
<p>Apache Commons contains a component in its sandbox, <a href="http://commons.apache.org/sandbox/commons-javaflow">Apache Commons JavaFlow</a>, that hasn&#8217;t been updated in a while, but that supports continuations in Java. 
It requires the code to be instrumented, and provides ways to restore the execution of the code.</p>
<p>The <a href="https://github.com/jenkinsci/workflow-plugin">Jenkins Workflow Plug-in</a> was presented during the <a href="http://www.cloudbees.com/jenkins/juc-2014/boston">Jenkins User Conference 2014 in Boston</a>. The plug-in has several Maven modules, among is the <strong>cps</strong> Maven module. This maven module provides CPS to the plugin. If you take a look at the team page of the JavaFlow project, you will find it interesting that Kohsuke Kawaguchi (Jenkins creator) is listed there too :-) </p>
<p>From what I could tell, the Jenkins Workflow Plug-in utilizes CPS to break down the workflow execution in 
several continuations, that are persisted to the disk and can be resumed in case the job execution is 
interrupted.</p>
<p>There are several differences between the cps module and Apache Commons Javaflow - such that in the latter the running code needs to be instrumented. I haven&#8217;t investigated all of them yet, but it sounds very interesting! I&#8217;m waiting for one of those rainy weekends so that I can spend many hours reading the code of the two and taking notes.</p>
<h3>Final thoughts</h3>
<p>CPS is a very interesting concept, and while probably the enterprise Java developer is not going to use it for his every day corporate web application (though some FP programmers might be using it), it is an 
interesting technique that can probably be applied in some specific scenarios - as it was in the Jenkins 
Workflow Plug-in.</p>
<p>There are <strong>optimizations available for CPS</strong> <a href="http://stackoverflow.com/questions/14781875/choosing-between-continuation-passing-style-and-memoization">1</a><a href="http://research.microsoft.com/pubs/64044/compilingwithcontinuationscontinued.pdf">2</a> too, so I believe the workflow-plugin has space for more innovation, and lots of fun for hackers.</p>
<p>Happy hacking!</p>
    </section>
  </article>
</div>
                    
                    <div class="ui padded segment">
  <article>
    <header>
      <h2><a href="/2014/02/27/lablua-aceito-no-gsoc-2014">LabLua aceito no GSoC 2014</a></h2>
      <small>Feb 27, 2014
        
        in 
            <a href="/tag/lua">lua</a>
        
        
        | <a href="/blog">blog</a>
        
      </small>
    </header>
    <section>
      <p>O <a href="http://www.lua.inf.puc-rio.br/">LabLua</a>, laboratório de pesquisa da PUC-RIO, foi 
aceito no <a href="https://www.google-melange.com/gsoc/org2/google/gsoc2014/lablua">Google Summer of Code 2014</a>. 
Isso quer dizer que estudantes podem se candidatar para trabalhar nas 
<a href="http://www.lua.inf.puc-rio.br/gsoc/ideas2014.html">ideias propostas</a>. Os alunos 
selecionados podem receber uma remuneração total de até USD 5.500 (aproximadamente 
R$ 12.900,00).</p>
<p>O LabLua é o único projeto Open Source brasileiro na lista de aprovados. Se você é 
estudante e tem interesse em programar em Lua esta é uma ótima oportunidade.</p>
<p><img alt="LabLua" src="/2014/02/27/lablua-aceito-no-gsoc-2014/lablua.png" /></p>
    </section>
  </article>
</div>
                    
                    <div class="ui padded segment">
  <article>
    <header>
      <h2><a href="/2013/10/25/increasing-logging-level-in-tomcat-to-solve-org.apache.catalina.core.StandardContext%20listenerStart-error">Increasing logging level in Tomcat to solve org.apache.catalina.core.StandardContext listenerStart error</a></h2>
      <small>Oct 25, 2013
        
        in 
            <a href="/tag/tomcat">tomcat</a>, <a href="/tag/java">java</a>
        
        
        | <a href="/blog">blog</a>
        
      </small>
    </header>
    <section>
      <p>Sometimes during the deployment of new applications in <a href="http://tomcat.apache.org">Tomcat</a> 
you may see errors like &#8216;org.apache.catalina.core.StandardContext listenerStart&#8217; in your 
startup log.</p>
<p>This may be caused due to many reasons (missing classes, including javax.servlet.* jars with 
your application, etc), but the reason is not displayed in the startup log.</p>
<p>But you can find out what is causing this error by adding <strong>logging.properties</strong> to your 
$TOMCAT_HOME/conf directory, with the following content:</p>
<pre><code>org.apache.catalina.core.ContainerBase.[Catalina].level = DEBUG
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler
</code></pre>
<p>After that you should be able to see the whole exception and figure out what is 
causing your application to fail.</p>
<p>Happy hacking!</p>
    </section>
  </article>
</div>
                    
                    <div class="ui padded segment">
  <article>
    <header>
      <h2><a href="/2013/10/23/evento-spin-sp-64-application-lifecycle">Evento SPIN SP - 64ª reunião - Tema central Application Lifecycle Management</a></h2>
      <small>Oct 23, 2013
        
        in 
            <a href="/tag/events">events</a>, <a href="/tag/news">news</a>
        
        
        | <a href="/blog">blog</a>
        
      </small>
    </header>
    <section>
      <p>Acontece amanh&atilde; (24), no campus Butant&atilde; da Universidade S&atilde;o Judas, a 64ª reuni&atilde;o do 
<strong><a href="http://www.spinsp.org.br/">SPIN de S&atilde;o Paulo</a></strong>, 
com o tema principal sendo Application Lifecycle Management (Gerenciamento do ciclo de vida de 
aplica&ccedil;ões). Do site do evento: </p>
<blockquote>Gerenciamento de Ciclo de Vida de Aplicativos (ALM) &eacute; a integra&ccedil;&atilde;o entre Gerência de Neg&oacute;cios com Engenharia de Software, 
que se tornou viável gra&ccedil;as a ferramentas que facilitam e integram processos como análise de requisitos, modelagem de arquitetura, 
desenvolvimento de c&oacute;digo, gerenciamento de mudan&ccedil;as, gerenciamento de testes e gerenciamento de versões de produtos realizados. 
Cada um destes processos faz parte de uma etapa de um ciclo de vida de um software.</blockquote>

<p>O evento come&ccedil;a ap&oacute;s o almo&ccedil;o e vai at&eacute; as 18:00. Fomos no &uacute;ltimo encontro da SPIN-SP, onde o 
t&oacute;pico era <strong>Integra&ccedil;&atilde;o Contínua</strong>, e todas as palestras que vimos foram &oacute;timas. Confira o nosso 
<a href="/2013/04/08/relato-sobre-a-63a-reuniao-do-spin-sp-tema-integracao-continua">relat&oacute;rio do evento passado</a>.</p>
<p>Se você estiver em S&atilde;o Paulo compare&ccedil;a! Vamos estar por lá, e vamos deixar alguns adesivos do Jenkins e 
já promover o <a href="http://www.meetup.com/jenkinsmeetup/events/133598002/">Jenkins Meetup S&atilde;o Paulo</a>.</p>
    </section>
  </article>
</div>
                    
                </section>
                <hr class="ui divider" />
                <div class="ui pagination menu">
                    
                    <a class="item" href="/blog/3"><i class='left arrow icon'></i> Previous Posts</a>
                    
                    
                    <a class="item" href="/blog"><i class='right arrow icon'></i> Next Posts</a>
                    
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        
        
<div class="ui inverted vertical footer segment">
  <div class="ui container">
    <div class="ui stackable inverted divided equal height stackable grid">
      <div class="three wide column">
        <h4 class="ui inverted header">Resources</h4>
        <div class="ui inverted link list">
          <a href="/about" class="item">About</a>
          <a href="/contact" class="item">Contact Us</a>
        </div>
      </div>
      <div class="three wide column">
        <h4 class="ui inverted header">Follow Us</h4>
        <div class="ui inverted link list">
          <a href="https://github.com/tupilabs" class="item"><i class="github icon"></i> GitHub</a>
          <a href="https://www.twitter.com/tupilabs" class="item"><i class="twitter icon"></i> Twitter</a>
          <a href="https://www.facebook.com/pages/TupiLabs/367986299948160" class="item"><i class="facebook icon"></i> FaceBook</a>
          <a href="http://www.youtube.com/user/TupiLabs" class="item"><i class="youtube icon"></i> YouTube</a>
        </div>
      </div>
      <div class="seven wide column">
        <h4 class="ui inverted header">Check out our lab!</h4>
        <p>Before projects are incubated in TupiLabs, we implement small proof of concepts in our
          <a href="/lab">lab</a>.
          You can check out what we are working on, and help us to make it better by telling us what
          you think.</p>
      </div>
    </div>
  </div>
</div>
    </div>
    <script src="/jquery.min.js"></script>
    <script src="/semantic.min.js"></script>
    <script src="/site.js"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-27590622-1', 'auto');
    ga('send', 'pageview');
    
    </script>
</body>
</html>
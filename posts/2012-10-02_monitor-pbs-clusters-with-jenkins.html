---
title: 'Monitor PBS clusters with Jenkins'
id: 749
author: kinow
tags: 
    - jenkins
    - bioinformatics
    - blog
time: '23:30:08'
category: blog
layout: blog
---
<p>It is not exactly an idea, it is more a requirement for <a href="http://www.biouno.org" title="BioUno">BioUno</a>. A common way of administering <a href="http://en.wikipedia.org/wiki/Batch_processing" title="Batch processing">Batch tasks</a> in computer clusters is using Batch servers such as <a href="http://en.wikipedia.org/wiki/Portable_Batch_System" title="PBS">PBS</a>. The process to submit a job consist of executing a shell script with special "meta" comments that will tell the PBS about your job priority, CPU's needed, etc.</p>

<p><a href="http://www.jenkins-ci.org" title="Jenkins CI">Jenkins</a> has an awesome remoting API, that has been reworked since its first version in Hudson (it was part of the core IIRC), and can be used for other things. There is a Wiki page about <a href="https://wiki.jenkins-ci.org/display/JENKINS/Monitoring+external+jobs" title="Monitoring external jobs with Jenkins">Monitoring external jobs</a>.</p>

<p>What we would need, is query the PBS server, running qstat + parameters locally in the cluster machine. So the requirements that I see:</p>

<ul>
<li>Learn more about the <a href="https://github.com/jenkinsci/remoting" title="Jenkins-CI remoting API">remoting</a> API in Jenkins (see <a href="http://kohsuke.org/tag/remoting/" title="Remoting by KK">http://kohsuke.org/tag/remoting/</a> too)</li>
<li>Rework <a href="http://code.google.com/p/pbs4java/" title="pbs4java">pbs4java</a> or use a wrapper to an existing C API (I've read in the past about one, the Python PBS module is a wrapper for this API too)</li>
<li>Learn about this technique for monitoring external jobs mentioned in that Wiki page</li>
<li>Write glue code if needed</li>
<li>Test with a <a href="{{site.base_url}}creating-a-pbsmpi-cluster-for-bioinformatics-part-1/" title="PBS cluster">PBS cluster</a></li>
<li>Report the findings (paper?)</li>
</ul>

<p>Just food for thought :D</p>

<p><strong>Edit:</strong> There is a <a href="https://wiki.jenkins-ci.org/label/JENKINS/plugin-cluster" title="plugin-cluster">label in Jenkins Wiki</a> with several plug-ins that could be used for reference</p>